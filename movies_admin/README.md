# Панель администратора Django

---

## Описание структуры:

Проект состоит из нескольких сервисов, запускаемых в отдельных 
[Docker](https://www.docker.com/)-контейнерах:

1. [Nginx](https://www.nginx.com/) — веб-сервер;
2. [PostgreSQL](https://www.postgresql.org/) — база данных (БД);
3. Django-Gunicorn — веб-приложение на базе веб-фреймворка 
[Django](https://docs.djangoproject.com/en/4.1/releases/3.2/) с 
WSGI-сервером [Gunicorn](https://gunicorn.org/);

Сервисы связаны между собой с помощью `docker compose` и зависят друг от друга.
Для упрощения работы в проекте предусмотрен Makefile.

В сервисе реализован API в соответствии с файлом `django_api/openapi.yaml`.
Примеры ссылок для получения списка фильмов: 
```
#все три ссылки ниже выдадут одинаковый результат
http://localhost/api/v1/movies/
http://localhost/api/v1/movies/?page=1 #параметр page можно изменить для получения другого списка фильмов
http://localhost/api/v1/movies/?page=first
```
Пример ссылки для получения подробной информации о фильме:
```
localhost/api/v1/movies/{{movieUuid}}
```




##  Порядок запуска проекта:

Для быстрого и полного запуска проекта достаточно, находясь в корне репозитория,
выполнить команду `make full-up`. 
Данная команда является составной и выполняет следующее:
1. создаст три контейнера на основе `docker-compose.yml` файла,
а также именованные `volume` - `static_volume` и `postgresql_volume`, предназначенные для хранения
статических файлов (css, js и пр.) и данных из БД соответственно.
2. осуществит Django-миграции (в БД PostgreSQL будут созданы схема, таблицы, индексы и пр.,
соответствующие моделям описанным в приложении `movies` проекта)
3. соберет статические файлы (css, js и пр.) и сложит их в вольюмы
4. создаст суперпользователя админки Django (логин: admin, пароль: admin)
5. наполнит базу PostgreSQL фильмами из файла (_db.sqlite_) базы данных SQLite


Каждое из описанных выше в списке действий может быть выполнено с помощью
отдельных команд:
1. `make up`
2. `make migrate` 
3. `make static` 
4. `make superuser` 
5. `make load-data`

Таким образом, можно запустить "_голый_" проект и выполнить только те команды,
которые требуется.

Больше команд прописано в `Makefile` 

## Требования для запуска проекта:
1. установленный и запущенный Docker Daemon
2. доступ к интернету
3. не менее 1 Гб свободного пространства на жестком диске



